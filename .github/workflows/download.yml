name: Download

on:
  push:
    branches:
      - master

jobs:
  download:
    strategy:
      matrix:
        os:
          - ubuntu-latest
          - macos-latest
        repo:
          - homebrew/linuxbrew-core
          - dawidd6/action-download-artifact
        include:
          - repo: homebrew/linuxbrew-core
            workflow: build-bottles.yml
            pr: 19869
            name: bottles
            path: bottles
          - repo: dawidd6/action-download-artifact
            workflow: upload.yml
            pr: 1
            name: artifact
            path: artifact
    runs-on: ${{matrix.os}}
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Download
        uses: ./
        with:
          repo: ${{matrix.repo}}
          workflow: ${{matrix.workflow}}
          pr: ${{matrix.pr}}
          name: ${{matrix.name}}
          path: ${{matrix.path}}
  download-container:
    runs-on: ubuntu-latest
    container:
      image: ubuntu:xenial
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Download
        uses: ./
        with:
          workflow: upload.yml
          pr: 1
          name: artifact
          path: artifact
